name: Build Release Workloads KRM
on:
  push:
    branches:
      - master
      - docker-caching
    paths:
      - '**'
      - './cmd/workloads'
      - './pkg/workloads'
      - './pkg/common'
      
jobs:
  build:
    name: build and publish
    uses: bukukasio/krm-functions/.github/workflows/common-build.yaml@docker-caching
    with:
      function: "workloads"
    secrets:
      service_account_key: ${{ secrets.GOOGLE_CLOUD_ACCOUNT }}
      project_id: ${{ secrets.BEECASH_PROJECT_ID }}
