apiVersion: LummoKRM
kind: LummoDeployment
metadata:
  name: test-app
spec:
  part-of: foobar
  app: foobar-api
  main-container: foobar-sidecar
  containers:
    - name: foobar-api
      image: foobar
      command: ["python", "server.py"]
      grpc:
        port: 3000
      http:
        port: 2000
      secrets:
        - foobar-api-database-secrets
        - foobar-api-payment-api-creds
      configs:
        - foobar-api-config
    - name: foobar-sidecar
      image: netools
      main: true
      command: ["python", "server.py"]
      grpc:
        port: 3000
      http:
        port: 2000
      secrets:
        - foobar-sidecar-database-secrets
        - foobar-sidecar-payment-api-creds
      configs:
        - foobar-sidecar-config

